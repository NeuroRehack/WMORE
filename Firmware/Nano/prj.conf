#
# Copyright (c) 2019 Nordic Semiconductor ASA
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause

#
# ===== UART SETTINGS =====
#
# Enable UART hardware + driver subsystem
CONFIG_SERIAL=y
# Use interrupt-driven UART (uart_irq_* API)
CONFIG_UART_INTERRUPT_DRIVEN=y
# Explicitly disable async UART (EasyDMA + event API)
# Note: Async API (as used in the Nano) caused crashes/resets on the XIAO BLE
CONFIG_UART_ASYNC_API=n

#
# ===== ESB RADIO SETTINGS =====
#
# Enable Enhanced ShockBurst (Nordic proprietary 2.4GHz)
CONFIG_ESB=y
# Use Nordicâ€™s recommended defaults (clock setup, IRQ priorities, etc.)
CONFIG_NCS_SAMPLES_DEFAULTS=y
# Produce a UF2 file so we can drag-and-drop the firmware to the XIAO bootloader
CONFIG_BUILD_OUTPUT_UF2=y

#
# ===== SAFETY / DEBUG SETTINGS =====
#
# Enable kernel + driver assertions
# Note: helpful during development only
CONFIG_ASSERT=y
# Increase main thread stack size to prevents stack overflows when running ESB + UART + timers
CONFIG_MAIN_STACK_SIZE=4096
# Increase ISR stack size (UART and ESB IRQs) to prevents hard faults caused by IRQ stack overflow
CONFIG_ISR_STACK_SIZE=4096

#
# ===== DISABLE CONSOLE / USB =====
#
# Disable UART console (frees UART0 for OLA communication)
CONFIG_UART_CONSOLE=n
# Disable printk() and console subsystem completely (removes console backend)
# Note: console backend is not working - better to disable completely
CONFIG_PRINTK=n
CONFIG_CONSOLE=n
# Disable USB device stack (CDC ACM virtual COM port)
CONFIG_USB_DEVICE_STACK=n
CONFIG_USB_CDC_ACM=n